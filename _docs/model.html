<!DOCTYPE html>
<html lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>Model</title>
   <link href='http://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css'>
   <link href='http://fonts.googleapis.com/css?family=Crimson+Text' rel='stylesheet' type='text/css'>
   <link rel="shortcut icon" type="image/ico" href="assets/favicon.ico" />
   <link rel="stylesheet" href="assets/style.css" type="text/css" media="screen, projection, handheld" />
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1601691-8']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body>

<div class="site">
  <div class="title">
    <!-- <a href="/lumagl/"><img src="assets/logo.png" alt="library logo" /></a> -->
    <h1>luma.gl</h1>
  </div>

  <div id="sidebar">
    <div class="box help">
      <b>Found a typo?</b>
      <a href="https://github.com/uber//luma.gl/tree/master/docs">
        Help make the docs better!
      </a>
    </div>

    <div class="box" id="modules">
      <b>Overview:</b>
      <ul>
        <li>
          <a href="index.html">Overview</a>
        </li>
      </ul>
    </div>

    <div class="box" id="modules">
      <b>Core Classes:</b>
        <li>
          <a href="model.html">Model</a>
        </li>
        <li>
          <a href="camera.html">Camera</a>
        </li>
        <li>
          <a href="scene.html">Scene</a>
        </li>
     </ul>
   </div>


    <div class="box" id="modules">
      <b>WebGL Classes:</b>
      <ul>
        <li>
          <a href="context.html">WebGL Context Creation</a>
        </li>
        <li>
          <a href="program.html">Program</a>
        </li>
        <li>
          <a href="buffer.html">Buffer</a>
        </li>
        <li>
          <a href="frame-buffer.html">FrameBuffer</a>
        </li>
        <li>
          <a href="texture.html">Texture</a>
        </li>
      </ul>
    </div>

    <div class="box" id="modules">
      <b>Modules:</b>
      <ul>
        <li>
          <a href="math.html">Math</a>
        </li>
        <li>
          <a href="shaders.html">Shaders</a>
        </li>
        <li>
          <a href="event.html">Event</a>
        </li>
        <li>
          <a href="fx.html">Fx</a>
        </li>
        <li>
          <a href="io.html">IO</a>
        </li>
        <li>
          <a href="media.html">Media</a>
        </li>
     </ul>
   </div>

   <div class="box" id="method-summary">
     <b>Methods: </b>
    <ul id="method-summary-list">
    </ul>
   </div>
  </div>

  <div id="doc">

<h1>Model</h1>

<p>The <code>Model</code> class holds all the data necessary to draw an object in
luma.gl: <strong>shaders</strong> (via a <code>Program</code> instance), <strong>vertex attributes</strong>
(a <code>Geometry</code> instance), <strong>uniforms</strong> and <strong>textures</strong>.</p>

<h1 id="Model">Class: Model</h1>

<p>For most applications, the <code>Model</code> class is probably the most central luma.gl
class.</p>

<h3 id="model-overview">Model Overview:</h3>

<ul>
  <li><code>Model</code> is a subclass of Object3D, meaning that it can be used in scene graphs
(by adding it to a <a href="group.html"><code>Group</code></a> or a <a href="scene.html"><code>Scene</code></a>),
and it can be positioned, rotated and scaled.</li>
  <li><code>Model</code> contains a <a href="program.html"><code>Program</code></a> (the shaders),
a <a href="geometry.html"><code>Geometry</code></a> (containing the attributes
for the primitive), any additional attributes for instanced rendering,
and also stores textures and uniforms.</li>
  <li>Has simple boolean flags for selecting indexed and/or instanced rendering.</li>
  <li>Offers a simple render method that binds all attributes, uniforms and
textures, selects (uses) the program, and calls the right gl draw call for
the model.</li>
  <li>Setting buffers</li>
  <li>Setting textures and more.</li>
</ul>

<h3 id="remarks">Remarks</h3>
<ul>
  <li>All instance methods in <code>Model</code> are chainable
(unless they return a documented value).</li>
</ul>

<h3 id="methods">Methods</h3>

<table>
  <tbody>
    <tr>
      <td><strong>Method</strong></td>
      <td><strong>Description</strong></td>
    </tr>
  </tbody>
  <tfoot>
    <tr>
      <td><code>constructor</code></td>
      <td>creates a Model</td>
    </tr>
    <tr>
      <td><code>hash</code></td>
      <td>Return a “unique” integer</td>
    </tr>
    <tr>
      <td><code>setInstanceCount</code></td>
      <td>How many instances</td>
    </tr>
    <tr>
      <td><code>getInstanceCount</code></td>
      <td>Defaults to 0</td>
    </tr>
    <tr>
      <td><code>setVertexCount</code></td>
      <td>How many vertices, can be autocalculated from <code>Geometry</code></td>
    </tr>
    <tr>
      <td><code>getVertexCount</code></td>
      <td>Gets vertex count</td>
    </tr>
    <tr>
      <td><code>isPickable</code></td>
      <td>True if picking is enabled</td>
    </tr>
    <tr>
      <td><code>setPickable</code></td>
      <td>enable/disable picking</td>
    </tr>
    <tr>
      <td><code>getProgram</code></td>
      <td>Get model’s <code>Program</code> instance</td>
    </tr>
    <tr>
      <td><code>getGeometry</code></td>
      <td>Get model’s <code>Geometry</code> instance</td>
    </tr>
    <tr>
      <td><code>getAttributes</code></td>
      <td>Get a map of named attributes</td>
    </tr>
    <tr>
      <td><code>setAttributes</code></td>
      <td>Sets map of attributes (Arrays or buffers)</td>
    </tr>
    <tr>
      <td><code>getUniforms</code></td>
      <td>Returns map of currently stored uniforms</td>
    </tr>
    <tr>
      <td><code>setUniforms</code></td>
      <td>Stores named uniforms {key, value}</td>
    </tr>
    <tr>
      <td><code>setTextures</code></td>
      <td>Sets array of textures for model</td>
    </tr>
    <tr>
      <td><code>render</code></td>
      <td>Takes a camera or a viewMatrix parameter</td>
    </tr>
    <tr>
      <td>onBeforeRender</td>
      <td>Called before model renders</td>
    </tr>
    <tr>
      <td><code>onAfterRender</code></td>
      <td>Called after model renders</td>
    </tr>
    <tr>
      <td><code>setProgramState</code></td>
      <td>Sets uniforms, attributes, textures, uses program</td>
    </tr>
    <tr>
      <td><code>unsetProgramState</code></td>
      <td>Unbinds attributes etc</td>
    </tr>
    <tr>
      <td><code>bindTextures</code></td>
      <td>binds textures</td>
    </tr>
  </tfoot>
</table>

<h2 id="Model:constructor">Model constructor</h2>

<ul>
  <li>program</li>
  <li>geometry</li>
  <li>material = null</li>
  <li>textures = []</li>
  <li>instanced = false</li>
  <li>instanceCount = 0</li>
  <li>vertexCount = undefined</li>
  <li>isIndexed = undefined</li>
  <li>pickable = false, pick = null</li>
  <li>uniforms = {}</li>
  <li>attributes = {}</li>
  <li>render = null</li>
  <li>onBeforeRender = null</li>
  <li>onAfterRender = null</li>
</ul>

<h2 id="Model:setUniforms">Model Method: setUniforms</h2>

<p>For each <code>key, value</code> of the object passed in it executes <code>setUniform(key, value)</code>.</p>

<h3 id="syntax">Syntax:</h3>

<pre><code>program.setUniforms(object);
</code></pre>

<h3 id="arguments">Arguments:</h3>

<ol>
  <li>
    <p>object - (<em>object</em>) An object with key value pairs matching a
                    uniform name and its value respectively.</p>
  </li>
  <li>key - (<em>string</em>) The name of the uniform to be set.
                 The name of the uniform will be matched with the name of
                 the uniform declared in the shader. You can set more
                 uniforms on the Model than its shaders use, the extra
                 uniforms will simply be ignored.</li>
  <li>value - (<em>mixed</em>) The value to be set.
                  Can be a float, an array of floats, a boolean, etc.
                  When the shaders are run (through a draw call),
                  The must match the declaration.
                  There’s no need to convert arrays into a typed array,
                  that’s done automatically.</li>
</ol>

<h3 id="examples">Examples:</h3>

<p>Set matrix information for the projection matrix and element matrix of the
camera and world.
The context of this example can be seen
[here]http://uber.github.io/luma.gl/examples/lessons/3/).</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">program</span><span class="p">.</span><span class="nx">setUniforms</span><span class="p">({</span>
  <span class="s1">&#39;uMVMatrix&#39;</span><span class="o">:</span> <span class="nx">view</span><span class="p">,</span>
  <span class="s1">&#39;uPMatrix&#39;</span><span class="o">:</span> <span class="nx">camera</span><span class="p">.</span><span class="nx">projection</span>
<span class="p">});</span></code></pre></figure>

<h2 id="Model:setTexture">Model Method: setTexture</h2>

<h2 id="Model:setTextures">Model Method: setTextures</h2>

<p>Sets a number of textures on the program.</p>

<h2 id="model-accessor-get-hash">Model accessor get hash</h2>

<h2 id="model-method-setinstancecount">Model method setInstanceCount</h2>
<ul>
  <li>instanceCount</li>
</ul>

<h2 id="model-method-getinstancecount">Model method getInstanceCount</h2>

<h2 id="model-method-setvertexcount">Model method setVertexCount</h2>
<ul>
  <li>vertexCount</li>
</ul>

<h2 id="model-method-getvertexcount">Model method getVertexCount</h2>

<h2 id="model-method-ispickable">Model method isPickable</h2>

<h2 id="model-method-setpickable">Model method setPickable</h2>

<h2 id="model-method-getprogram">Model method getProgram</h2>

<h2 id="model-method-getgeometry">Model method getGeometry</h2>

<h2 id="model-method-getattributes">Model method getAttributes</h2>

<h2 id="model-method-setattributes">Model method setAttributes</h2>
<ul>
  <li>attributes = {}</li>
</ul>

<h2 id="model-method-getuniforms">Model method getUniforms</h2>
<p>Sets uniforms to be used. Note that uniforms are stored in a map so uniform
values not present in the argument map won’t be overwritten.</p>

<h2 id="model-method-setuniforms">Model method setUniforms</h2>
<p>Sets uniforms to be used. Note that uniforms are stored in a map so uniform
values not present in the argument map won’t be overwritten.</p>

<h2 id="model-method-settextures">Model method setTextures</h2>
<p>Sets textures to be used.</p>

<h2 id="model-method-render">Model method render</h2>
<p>Draws the model (i.e. binds all the attributes textures and uniforms and runs
the shaders in attached program). Can be called directly but is usually called
during by Scene.render traversing the models in the scene.</p>

<ul>
  <li>camera - Camera exposes uniforms that can be used directly in shaders</li>
  <li>viewMatrix</li>
</ul>

<h3 id="less-commonly-used-methods">Less commonly used methods</h3>

<h2 id="model-method-onbeforerender">Model method onBeforeRender()</h2>
<p>Attaches attributes</p>

<h2 id="model-method-onafterrender">Model method onAfterRender()</h2>
<p>Detaches attributes</p>

<h2 id="model-method-setprogramstate">Model method setProgramState</h2>
<p>Attaches attributes for primitive (from geometry) and instances (from model),
Sets uniforms and textures</p>

<h2 id="model-method-unsetprogramstate">Model method unsetProgramState</h2>
<p>Reverses setProgramState</p>

<h2 id="model-method-bindtextures">Model method bindTextures</h2>

<p>(force = false)</p>


</div>

<script type="text/javascript">
  (function() {
    var h2 = document.getElementById('doc').getElementsByTagName('h2'),
        ans = [];
    for (var i = 0, l = h2.length; i < l; i++) {
      var elem = h2[i];
      ans.push('<a href=\'#' + elem.id + '\'>' + (elem.innerText || elem.textContent) + '</a>');
    }
    document.getElementById('method-summary-list').innerHTML = '<li>' + ans.join('</li><li>') + '</li>';
  })();
</script>


</div>
</body>
</html>
