<!DOCTYPE html>
<html lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>IO</title>
   <link href='http://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css'>
   <link href='http://fonts.googleapis.com/css?family=Crimson+Text' rel='stylesheet' type='text/css'>
   <link rel="shortcut icon" type="image/ico" href="assets/favicon.ico" />
   <link rel="stylesheet" href="assets/style.css" type="text/css" media="screen, projection, handheld" />
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1601691-8']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body>

<div class="site">
  <div class="title">
    <!-- <a href="/lumagl/"><img src="assets/logo.png" alt="library logo" /></a> -->
    <h1>luma.gl</h1>
  </div>

  <div id="sidebar">
    <div class="box help">
      <b>Found a typo?</b>
      <a href="https://github.com/uber//luma.gl/tree/master/docs">
        Help make the docs better!
      </a>
    </div>

    <div class="box" id="modules">
      <b>Overview:</b>
      <ul>
        <li>
          <a href="index.html">Overview</a>
        </li>
      </ul>
    </div>

    <div class="box" id="modules">
      <b>Core Classes:</b>
        <li>
          <a href="model.html">Model</a>
        </li>
        <li>
          <a href="camera.html">Camera</a>
        </li>
        <li>
          <a href="scene.html">Scene</a>
        </li>
     </ul>
   </div>


    <div class="box" id="modules">
      <b>WebGL Classes:</b>
      <ul>
        <li>
          <a href="context.html">WebGL Context Creation</a>
        </li>
        <li>
          <a href="program.html">Program</a>
        </li>
        <li>
          <a href="buffer.html">Buffer</a>
        </li>
        <li>
          <a href="frame-buffer.html">FrameBuffer</a>
        </li>
        <li>
          <a href="texture.html">Texture</a>
        </li>
      </ul>
    </div>

    <div class="box" id="modules">
      <b>Modules:</b>
      <ul>
        <li>
          <a href="math.html">Math</a>
        </li>
        <li>
          <a href="shaders.html">Shaders</a>
        </li>
        <li>
          <a href="event.html">Event</a>
        </li>
        <li>
          <a href="fx.html">Fx</a>
        </li>
        <li>
          <a href="io.html">IO</a>
        </li>
        <li>
          <a href="media.html">Media</a>
        </li>
     </ul>
   </div>

   <div class="box" id="method-summary">
     <b>Methods: </b>
    <ul id="method-summary-list">
    </ul>
   </div>
  </div>

  <div id="doc">

<h1>IO</h1>

<h1 id="IO">Module: IO</h1>

<p>The IO module contains classes to load assets like images, shader files,
textures, models and data sets in an asynchronous way.</p>

<p>Separates between loadFiles, loadImages and loadTextures.</p>

<p>While the intention is to mainly provide a basic set of features and
to enable use of external modules for more advanced asset loading use cases,
the IO module does provide a couple of conveniences:</p>

<ul>
  <li>Parallel loading of multiple files.</li>
  <li>Promise based interface, easy to compose with other asynchronous events.</li>
  <li>Works on both browser and node (work in progress).</li>
  <li>Progress callbacks (work in progress).</li>
</ul>

<h2 id="IO:loadFiles">IO Function: loadFiles</h2>

<p>Loads remote data asynchronously via an http request (AJAX).
On the browser, the domain serving the data must match the
domain where the data is queried.</p>

<p>Creates a connection and sends the information to be sent. Returns
an array of promises that will resolve to the contents of the files.</p>

<h3 id="syntax">Syntax:</h3>

<p>loadFiles({paths, …options});</p>

<h3 id="arguments">Arguments:</h3>

<ol>
  <li>paths - (<em>array</em>)</li>
  <li>options - (<em>object</em>) An object containing the following options:</li>
</ol>

<h3 id="options">Options:</h3>

<ul>
  <li>method - (<em>string</em>, optional, default=’GET’)
The request method. Possible values are <code>GET</code> or <code>POST</code>.</li>
  <li>async - (<em>boolean</em>, optional, default=true)
Whether to make the request asynchronous or not.</li>
  <li>noCache - (<em>boolean</em>, optional, default=false)
If true a random number will be appended to the url in order to
force the reload of the file and avoid the use of the cache.</li>
  <li>responseType - (<em>string</em>, optional)
The format/type of data to be retrieved.
Set this to <code>arraybuffer</code> to get binary data. More info
<a href="https://developer.mozilla.org/En/Using_XMLHttpRequest#Handling_binary_data">here</a>.</li>
  <li>sendAsBinary - (<em>boolean</em>, optional, default=false)
Whether the content should be sent as binary or not. More info
<a href="https://developer.mozilla.org/en/xmlhttprequest#sendAsBinary()">here</a>.</li>
  <li>body - (<em>mixed</em>, optional) To be used when <code>sendAsBinary</code> is <code>true</code>.
The binary content to be sent. More info
<a href="https://developer.mozilla.org/en/xmlhttprequest#sendAsBinary()">here</a>.</li>
  <li>onProgress - (<em>function</em>, optional)
A callback executed while the data is being downloaded.
The first parameter of the callback is the percentage downloaded.</li>
</ul>

<h3 id="options-1">Options:</h3>

<ul>
  <li>method - (<em>string</em>, optional) The request method.
Possible values are <code>GET</code> or <code>POST</code>. Default’s <code>GET</code>.</li>
  <li>async - (<em>boolean</em>, optional, default=true)
Whether to make the request asynchronous or not. Default’s <code>true</code>.</li>
  <li>noCache - (<em>boolean</em>, optional, default= false)
 If true a random number will be appended
 to the url in order to force the reload of the file and avoid
 the use of the cache.</li>
  <li>responseType - (<em>string</em>, optional) The format/type of data to be retrieved.
Set this to <code>arraybuffer</code> to get binary data. More info
<a href="https://developer.mozilla.org/En/Using_XMLHttpRequest#Handling_binary_data">here</a>.</li>
  <li>sendAsBinary - (<em>boolean</em>, optional) Whether the content should be sent
as binary or not. Default’s false. More info 
<a href="https://developer.mozilla.org/en/xmlhttprequest#sendAsBinary()">here</a>.</li>
  <li>body - (<em>mixed</em>, optional) To be used when <code>sendAsBinary</code> is <code>true</code>.
The binary content to be sent. More info 
<a href="https://developer.mozilla.org/en/xmlhttprequest#sendAsBinary()">here</a>.</li>
</ul>

<h3 id="examples">Examples:</h3>

<p>Creating a request object to a specific url and making the request. 
Note the <code>send</code> call at the end of the instanciation.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js">  <span class="c1">// Using ES7 async/await</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">text</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">loadFiles</span><span class="p">({</span>
      <span class="nx">paths</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;/mydomain/somethingelse/&#39;</span><span class="p">]</span>
    <span class="p">});</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;An error ocurred&quot;</span><span class="p">);</span>
  <span class="p">}</span></code></pre></figure>

<p>Creating a request object to a specific url.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js">  <span class="nx">loadFiles</span><span class="p">({</span>
    <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;/mydomain/somethingelse/&#39;</span><span class="p">,</span>
    <span class="nx">onSuccess</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">onError</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;An error ocurred&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span></code></pre></figure>

<p>Creating a request object to a specific url.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js">  <span class="kd">var</span> <span class="nx">req</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">loadFiles</span><span class="p">({</span>
    <span class="nx">urls</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;/mydomain/1/&#39;</span> <span class="s1">&#39;/mydomain/2/&#39;</span><span class="p">],</span>

    <span class="nx">onError</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;An error ocurred in one request&quot;</span><span class="p">);</span>
    <span class="p">},</span>

    <span class="nx">onComplete</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;responses: &quot;</span> <span class="o">+</span> <span class="nx">arr</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span></code></pre></figure>

<p>Creating a request object to a specific url and making the request.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js">  <span class="kd">var</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">loadFiles</span><span class="p">({</span>
    <span class="nx">paths</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;/mydomain/1/&#39;</span><span class="p">,</span> <span class="s1">&#39;/mydomain/2/&#39;</span><span class="p">],</span>
  <span class="p">})</span>
    <span class="nx">onSuccess</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
    <span class="p">},</span>

    <span class="nx">onError</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;An error ocurred&quot;</span><span class="p">);</span>
    <span class="p">},</span>

    <span class="nx">onComplete</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;answer array: &quot;</span> <span class="o">+</span> <span class="nx">arr</span><span class="p">);</span>
    <span class="p">}</span></code></pre></figure>

<h2 id="IO:loadImages">IO Function: loadImages</h2>

<p>A very useful class that enables loading of multiple remote images
asynchronously and returns an array with all the images loaded.</p>

<h3 id="syntax-1">Syntax:</h3>

<pre><code>const images = await loadImages({paths, ...options});
</code></pre>

<h3 id="arguments-1">Arguments:</h3>

<ol>
  <li>paths - (<em>array</em>) An array of strings pointing to image urls.</li>
  <li>options - (<em>object</em>) An object containing the following options:</li>
</ol>

<h3 id="options-2">Options:</h3>

<ul>
  <li>onProgress - (<em>function</em>, optional) Callback executed each time an image is loaded. Provides as first argument the percentage of images loaded.</li>
  <li>noCache - (<em>boolean</em>, optional, default=false)
If true a random number will be appended to the url in order to force
the reload of the file and avoid the use of the cache.</li>
</ul>

<h3 id="examples-1">Examples:</h3>

<p>Creating a request to load images.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js">  <span class="kr">const</span> <span class="nx">imageUrls</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;image1.png&#39;</span><span class="p">,</span> <span class="s1">&#39;image2.png&#39;</span><span class="p">,</span> <span class="s1">&#39;image3.png&#39;</span><span class="p">];</span>
  <span class="kr">const</span> <span class="nx">images</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">loadImages</span><span class="p">({</span>
    <span class="nx">paths</span><span class="o">:</span> <span class="nx">imageUrls</span><span class="p">,</span>
    <span class="nx">onProgress</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">perc</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">perc</span> <span class="o">+</span> <span class="s1">&#39; loaded&#39;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;All images loaded! Now do something with the images array&quot;</span><span class="p">);</span></code></pre></figure>

<h2 id="IO:loadTextures">IO Function: loadTextures</h2>

<p>Loads multiple textures from image urls asynchronously and in parallel.</p>

<h3 id="syntax-2">Syntax:</h3>

<figure class="highlight"><pre><code class="language-js" data-lang="js">	<span class="kr">const</span> <span class="nx">textures</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">loadTextures</span><span class="p">({</span><span class="nx">paths</span><span class="p">,</span> <span class="nx">params</span><span class="p">,</span> <span class="p">...</span><span class="nx">options</span><span class="p">});</span></code></pre></figure>

<h3 id="arguments-2">Arguments:</h3>

<ol>
  <li>paths - (<em>array</em>) An array of strings pointing to image urls.</li>
  <li>options - (<em>object</em>) An object containing the following options:</li>
</ol>

<h3 id="options-3">Options:</h3>

<ul>
  <li>noCache - (<em>boolean</em>, optional, default=false)
If true a random number will be appended to the url in order to
force the reload of the file and avoid the use of the cache.</li>
</ul>

<h3 id="examples-2">Examples:</h3>

<p>Creating a request to load images and create WebGL textures</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js">  <span class="kr">const</span> <span class="nx">imageUrls</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;image1.png&#39;</span><span class="p">,</span> <span class="s1">&#39;image2.png&#39;</span><span class="p">,</span> <span class="s1">&#39;image3.png&#39;</span><span class="p">];</span>
  <span class="kr">const</span> <span class="nx">textures</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">loadTextures</span><span class="p">({</span>
    <span class="nx">paths</span><span class="o">:</span> <span class="nx">imageUrls</span><span class="p">,</span>
  <span class="p">});</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;All images and textures loaded!&quot;</span><span class="p">);</span></code></pre></figure>



</div>

<script type="text/javascript">
  (function() {
    var h2 = document.getElementById('doc').getElementsByTagName('h2'),
        ans = [];
    for (var i = 0, l = h2.length; i < l; i++) {
      var elem = h2[i];
      ans.push('<a href=\'#' + elem.id + '\'>' + (elem.innerText || elem.textContent) + '</a>');
    }
    document.getElementById('method-summary-list').innerHTML = '<li>' + ans.join('</li><li>') + '</li>';
  })();
</script>


</div>
</body>
</html>
