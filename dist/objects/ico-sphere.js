'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.IcoSphereGeometry = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _geometry = require('../geometry');

var _geometry2 = _interopRequireDefault(_geometry);

var _math = require('../math');

var _model = require('../model');

var _model2 = _interopRequireDefault(_model);

var _types = require('../webgl/types');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/* eslint-disable comma-spacing, max-statements, complexity */

function noop() {}

var ICO_VERTICES = [-1, 0, 0, 0, 1, 0, 0, 0, -1, 0, 0, 1, 0, -1, 0, 1, 0, 0];
var ICO_INDICES = [3, 4, 5, 3, 5, 1, 3, 1, 0, 3, 0, 4, 4, 0, 2, 4, 2, 5, 2, 0, 1, 5, 2, 1];

var IcoSphereGeometry = exports.IcoSphereGeometry = function (_Geometry) {
  _inherits(IcoSphereGeometry, _Geometry);

  function IcoSphereGeometry() {
    var _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

    var _ref$iterations = _ref.iterations;
    var iterations = _ref$iterations === undefined ? 0 : _ref$iterations;
    var _ref$onAddVertex = _ref.onAddVertex;
    var onAddVertex = _ref$onAddVertex === undefined ? noop : _ref$onAddVertex;

    var opts = _objectWithoutProperties(_ref, ['iterations', 'onAddVertex']);

    _classCallCheck(this, IcoSphereGeometry);

    var PI = Math.PI;
    var PI2 = PI * 2;

    var vertices = [].concat(ICO_VERTICES);
    var indices = [].concat(ICO_INDICES);

    vertices.push();
    indices.push();

    var getMiddlePoint = function () {
      var pointMemo = {};

      return function (i1, i2) {
        i1 *= 3;
        i2 *= 3;
        var mini = i1 < i2 ? i1 : i2;
        var maxi = i1 > i2 ? i1 : i2;
        var key = mini + '|' + maxi;

        if (key in pointMemo) {
          return pointMemo[key];
        }

        var x1 = vertices[i1];
        var y1 = vertices[i1 + 1];
        var z1 = vertices[i1 + 2];
        var x2 = vertices[i2];
        var y2 = vertices[i2 + 1];
        var z2 = vertices[i2 + 2];
        var xm = (x1 + x2) / 2;
        var ym = (y1 + y2) / 2;
        var zm = (z1 + z2) / 2;
        var len = Math.sqrt(xm * xm + ym * ym + zm * zm);

        xm /= len;
        ym /= len;
        zm /= len;

        vertices.push(xm, ym, zm);

        return pointMemo[key] = vertices.length / 3 - 1;
      };
    }();

    for (var i = 0; i < iterations; i++) {
      var indices2 = [];
      for (var j = 0; j < indices.length; j += 3) {
        var a = getMiddlePoint(indices[j + 0], indices[j + 1]);
        var b = getMiddlePoint(indices[j + 1], indices[j + 2]);
        var c = getMiddlePoint(indices[j + 2], indices[j + 0]);

        indices2.push(c, indices[j + 0], a, a, indices[j + 1], b, b, indices[j + 2], c, a, b, c);
      }
      indices = indices2;
    }

    // Calculate texCoords and normals
    var normals = new Array(indices.length * 3);
    var texCoords = new Array(indices.length * 2);

    var l = indices.length;
    for (var i = l - 3; i >= 0; i -= 3) {
      var i1 = indices[i + 0];
      var i2 = indices[i + 1];
      var i3 = indices[i + 2];
      var in1 = i1 * 3;
      var in2 = i2 * 3;
      var in3 = i3 * 3;
      var iu1 = i1 * 2;
      var iu2 = i2 * 2;
      var iu3 = i3 * 2;
      var x1 = vertices[in1 + 0];
      var y1 = vertices[in1 + 1];
      var z1 = vertices[in1 + 2];
      var theta1 = Math.acos(z1 / Math.sqrt(x1 * x1 + y1 * y1 + z1 * z1));
      var phi1 = Math.atan2(y1, x1) + PI;
      var v1 = theta1 / PI;
      var u1 = 1 - phi1 / PI2;
      var x2 = vertices[in2 + 0];
      var y2 = vertices[in2 + 1];
      var z2 = vertices[in2 + 2];
      var theta2 = Math.acos(z2 / Math.sqrt(x2 * x2 + y2 * y2 + z2 * z2));
      var phi2 = Math.atan2(y2, x2) + PI;
      var v2 = theta2 / PI;
      var u2 = 1 - phi2 / PI2;
      var x3 = vertices[in3 + 0];
      var y3 = vertices[in3 + 1];
      var z3 = vertices[in3 + 2];
      var theta3 = Math.acos(z3 / Math.sqrt(x3 * x3 + y3 * y3 + z3 * z3));
      var phi3 = Math.atan2(y3, x3) + PI;
      var v3 = theta3 / PI;
      var u3 = 1 - phi3 / PI2;
      var vec1 = [x3 - x2, y3 - y2, z3 - z2];
      var vec2 = [x1 - x2, y1 - y2, z1 - z2];
      var normal = _math.Vec3.cross(vec1, vec2).$unit();
      var newIndex = undefined;

      if ((u1 === 0 || u2 === 0 || u3 === 0) && (u1 === 0 || u1 > 0.5) && (u2 === 0 || u2 > 0.5) && (u3 === 0 || u3 > 0.5)) {

        vertices.push(vertices[in1 + 0], vertices[in1 + 1], vertices[in1 + 2]);
        newIndex = vertices.length / 3 - 1;
        indices.push(newIndex);
        texCoords[newIndex * 2 + 0] = 1;
        texCoords[newIndex * 2 + 1] = v1;
        normals[newIndex * 3 + 0] = normal.x;
        normals[newIndex * 3 + 1] = normal.y;
        normals[newIndex * 3 + 2] = normal.z;

        vertices.push(vertices[in2 + 0], vertices[in2 + 1], vertices[in2 + 2]);
        newIndex = vertices.length / 3 - 1;
        indices.push(newIndex);
        texCoords[newIndex * 2 + 0] = 1;
        texCoords[newIndex * 2 + 1] = v2;
        normals[newIndex * 3 + 0] = normal.x;
        normals[newIndex * 3 + 1] = normal.y;
        normals[newIndex * 3 + 2] = normal.z;

        vertices.push(vertices[in3 + 0], vertices[in3 + 1], vertices[in3 + 2]);
        newIndex = vertices.length / 3 - 1;
        indices.push(newIndex);
        texCoords[newIndex * 2 + 0] = 1;
        texCoords[newIndex * 2 + 1] = v3;
        normals[newIndex * 3 + 0] = normal.x;
        normals[newIndex * 3 + 1] = normal.y;
        normals[newIndex * 3 + 2] = normal.z;
      }

      normals[in1 + 0] = normals[in2 + 0] = normals[in3 + 0] = normal.x;
      normals[in1 + 1] = normals[in2 + 1] = normals[in3 + 1] = normal.y;
      normals[in1 + 2] = normals[in2 + 2] = normals[in3 + 2] = normal.z;

      texCoords[iu1 + 0] = u1;
      texCoords[iu1 + 1] = v1;

      texCoords[iu2 + 0] = u2;
      texCoords[iu2 + 1] = v2;

      texCoords[iu3 + 0] = u3;
      texCoords[iu3 + 1] = v3;
    }

    return _possibleConstructorReturn(this, Object.getPrototypeOf(IcoSphereGeometry).call(this, _extends({}, opts, {
      attributes: {
        vertices: (0, _types.makeTypedArray)(Float32Array, vertices),
        normals: (0, _types.makeTypedArray)(Float32Array, normals),
        texCoords: (0, _types.makeTypedArray)(Float32Array, texCoords),
        indices: (0, _types.makeTypedArray)(Uint16Array, indices)
      }
    })));
  }

  return IcoSphereGeometry;
}(_geometry2.default);

var IcoSphere = function (_Model) {
  _inherits(IcoSphere, _Model);

  function IcoSphere() {
    var opts = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

    _classCallCheck(this, IcoSphere);

    return _possibleConstructorReturn(this, Object.getPrototypeOf(IcoSphere).call(this, _extends({ geometry: new IcoSphereGeometry(opts) }, opts)));
  }

  return IcoSphere;
}(_model2.default);

exports.default = IcoSphere;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vYmplY3RzL2ljby1zcGhlcmUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0EsU0FBUyxJQUFULEdBQWdCLEVBQWhCOztBQUVBLElBQU0sZUFBZSxDQUFDLENBQUMsQ0FBRCxFQUFHLENBQUosRUFBTSxDQUFOLEVBQVMsQ0FBVCxFQUFXLENBQVgsRUFBYSxDQUFiLEVBQWdCLENBQWhCLEVBQWtCLENBQWxCLEVBQW9CLENBQUMsQ0FBRCxFQUFJLENBQXhCLEVBQTBCLENBQTFCLEVBQTRCLENBQTVCLEVBQStCLENBQS9CLEVBQWlDLENBQUMsQ0FBRCxFQUFHLENBQXBDLEVBQXVDLENBQXZDLEVBQXlDLENBQXpDLEVBQTJDLENBQTNDLENBQWY7QUFDTixJQUFNLGNBQWMsQ0FBQyxDQUFELEVBQUcsQ0FBSCxFQUFLLENBQUwsRUFBTyxDQUFQLEVBQVMsQ0FBVCxFQUFXLENBQVgsRUFBYSxDQUFiLEVBQWUsQ0FBZixFQUFpQixDQUFqQixFQUFtQixDQUFuQixFQUFxQixDQUFyQixFQUF1QixDQUF2QixFQUF5QixDQUF6QixFQUEyQixDQUEzQixFQUE2QixDQUE3QixFQUErQixDQUEvQixFQUFpQyxDQUFqQyxFQUFtQyxDQUFuQyxFQUFxQyxDQUFyQyxFQUF1QyxDQUF2QyxFQUF5QyxDQUF6QyxFQUEyQyxDQUEzQyxFQUE2QyxDQUE3QyxFQUErQyxDQUEvQyxDQUFkOztJQUVPOzs7QUFFWCxXQUZXLGlCQUVYLEdBQWdFO3FFQUFKLGtCQUFJOzsrQkFBbkQsV0FBbUQ7UUFBbkQsNkNBQWEsb0JBQXNDO2dDQUFuQyxZQUFtQztRQUFuQywrQ0FBYyx3QkFBcUI7O1FBQVoscUVBQVk7OzBCQUZyRCxtQkFFcUQ7O0FBQzlELFFBQU0sS0FBSyxLQUFLLEVBQUwsQ0FEbUQ7QUFFOUQsUUFBTSxNQUFNLEtBQUssQ0FBTCxDQUZrRDs7QUFJOUQsUUFBTSxxQkFBZSxhQUFmLENBSndEO0FB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b21ldHJ5IGZyb20gJy4uL2dlb21ldHJ5JztcbmltcG9ydCB7VmVjM30gZnJvbSAnLi4vbWF0aCc7XG5pbXBvcnQgTW9kZWwgZnJvbSAnLi4vbW9kZWwnO1xuaW1wb3J0IHttYWtlVHlwZWRBcnJheX0gZnJvbSAnLi4vd2ViZ2wvdHlwZXMnO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBjb21tYS1zcGFjaW5nLCBtYXgtc3RhdGVtZW50cywgY29tcGxleGl0eSAqL1xuXG5mdW5jdGlvbiBub29wKCkge31cblxuY29uc3QgSUNPX1ZFUlRJQ0VTID0gWy0xLDAsMCwgMCwxLDAsIDAsMCwtMSwgMCwwLDEsIDAsLTEsMCwgMSwwLDBdO1xuY29uc3QgSUNPX0lORElDRVMgPSBbMyw0LDUsMyw1LDEsMywxLDAsMywwLDQsNCwwLDIsNCwyLDUsMiwwLDEsNSwyLDFdO1xuXG5leHBvcnQgY2xhc3MgSWNvU3BoZXJlR2VvbWV0cnkgZXh0ZW5kcyBHZW9tZXRyeSB7XG5cbiAgY29uc3RydWN0b3Ioe2l0ZXJhdGlvbnMgPSAwLCBvbkFkZFZlcnRleCA9IG5vb3AsIC4uLm9wdHN9ID0ge30pIHtcbiAgICBjb25zdCBQSSA9IE1hdGguUEk7XG4gICAgY29uc3QgUEkyID0gUEkgKiAyO1xuXG4gICAgY29uc3QgdmVydGljZXMgPSBbLi4uSUNPX1ZFUlRJQ0VTXTtcbiAgICBsZXQgaW5kaWNlcyA9IFsuLi5JQ09fSU5ESUNFU107XG5cbiAgICB2ZXJ0aWNlcy5wdXNoKCk7XG4gICAgaW5kaWNlcy5wdXNoKCk7XG5cbiAgICB2YXIgZ2V0TWlkZGxlUG9pbnQgPSAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcG9pbnRNZW1vID0ge307XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbihpMSwgaTIpIHtcbiAgICAgICAgaTEgKj0gMztcbiAgICAgICAgaTIgKj0gMztcbiAgICAgICAgY29uc3QgbWluaSA9IGkxIDwgaTIgPyBpMSA6IGkyO1xuICAgICAgICBjb25zdCBtYXhpID0gaTEgPiBpMiA/IGkxIDogaTI7XG4gICAgICAgIGNvbnN0IGtleSA9IG1pbmkgKyAnfCcgKyBtYXhpO1xuXG4gICAgICAgIGlmIChrZXkgaW4gcG9pbnRNZW1vKSB7XG4gICAgICAgICAgcmV0dXJuIHBvaW50TWVtb1trZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeDEgPSB2ZXJ0aWNlc1tpMV07XG4gICAgICAgIGNvbnN0IHkxID0gdmVydGljZXNbaTEgKyAxXTtcbiAgICAgICAgY29uc3QgejEgPSB2ZXJ0aWNlc1tpMSArIDJdO1xuICAgICAgICBjb25zdCB4MiA9IHZlcnRpY2VzW2kyXTtcbiAgICAgICAgY29uc3QgeTIgPSB2ZXJ0aWNlc1tpMiArIDFdO1xuICAgICAgICBjb25zdCB6MiA9IHZlcnRpY2VzW2kyICsgMl07XG4gICAgICAgIGxldCB4bSA9ICh4MSArIHgyKSAvIDI7XG4gICAgICAgIGxldCB5bSA9ICh5MSArIHkyKSAvIDI7XG4gICAgICAgIGxldCB6bSA9ICh6MSArIHoyKSAvIDI7XG4gICAgICAgIGNvbnN0IGxlbiA9IE1hdGguc3FydCh4bSAqIHhtICsgeW0gKiB5bSArIHptICogem0pO1xuXG4gICAgICAgIHhtIC89IGxlbjtcbiAgICAgICAgeW0gLz0gbGVuO1xuICAgICAgICB6bSAvPSBsZW47XG5cbiAgICAgICAgdmVydGljZXMucHVzaCh4bSwgeW0sIHptKTtcblxuICAgICAgICByZXR1cm4gKHBvaW50TWVtb1trZXldID0gKHZlcnRpY2VzLmxlbmd0aCAvIDMgLSAxKSk7XG4gICAgICB9O1xuICAgIH0oKSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgdmFyIGluZGljZXMyID0gW107XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGluZGljZXMubGVuZ3RoOyBqICs9IDMpIHtcbiAgICAgICAgY29uc3QgYSA9IGdldE1pZGRsZVBvaW50KGluZGljZXNbaiArIDBdLCBpbmRpY2VzW2ogKyAxXSk7XG4gICAgICAgIGNvbnN0IGIgPSBnZXRNaWRkbGVQb2ludChpbmRpY2VzW2ogKyAxXSwgaW5kaWNlc1tqICsgMl0pO1xuICAgICAgICBjb25zdCBjID0gZ2V0TWlkZGxlUG9pbnQoaW5kaWNlc1tqICsgMl0sIGluZGljZXNbaiArIDBdKTtcblxuICAgICAgICBpbmRpY2VzMi5wdXNoKFxuICAgICAgICAgIGMsIGluZGljZXNbaiArIDBdLCBhLFxuICAgICAgICAgIGEsIGluZGljZXNbaiArIDFdLCBiLFxuICAgICAgICAgIGIsIGluZGljZXNbaiArIDJdLCBjLFxuICAgICAgICAgIGEsIGIsIGMpO1xuICAgICAgfVxuICAgICAgaW5kaWNlcyA9IGluZGljZXMyO1xuICAgIH1cblxuICAgIC8vIENhbGN1bGF0ZSB0ZXhDb29yZHMgYW5kIG5vcm1hbHNcbiAgICBjb25zdCBub3JtYWxzID0gbmV3IEFycmF5KGluZGljZXMubGVuZ3RoICogMyk7XG4gICAgY29uc3QgdGV4Q29vcmRzID0gbmV3IEFycmF5KGluZGljZXMubGVuZ3RoICogMik7XG5cbiAgICBjb25zdCBsID0gaW5kaWNlcy5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IGwgLSAzOyBpID49IDA7IGkgLT0gMykge1xuICAgICAgbGV0IGkxID0gaW5kaWNlc1tpICsgMF07XG4gICAgICBsZXQgaTIgPSBpbmRpY2VzW2kgKyAxXTtcbiAgICAgIGxldCBpMyA9IGluZGljZXNbaSArIDJdO1xuICAgICAgY29uc3QgaW4xID0gaTEgKiAzO1xuICAgICAgY29uc3QgaW4yID0gaTIgKiAzO1xuICAgICAgY29uc3QgaW4zID0gaTMgKiAzO1xuICAgICAgY29uc3QgaXUxID0gaTEgKiAyO1xuICAgICAgY29uc3QgaXUyID0gaTIgKiAyO1xuICAgICAgY29uc3QgaXUzID0gaTMgKiAyO1xuICAgICAgY29uc3QgeDEgPSB2ZXJ0aWNlc1tpbjEgKyAwXTtcbiAgICAgIGNvbnN0IHkxID0gdmVydGljZXNbaW4xICsgMV07XG4gICAgICBjb25zdCB6MSA9IHZlcnRpY2VzW2luMSArIDJdO1xuICAgICAgY29uc3QgdGhldGExID0gTWF0aC5hY29zKHoxIC8gTWF0aC5zcXJ0KHgxICogeDEgKyB5MSAqIHkxICsgejEgKiB6MSkpO1xuICAgICAgY29uc3QgcGhpMSA9IE1hdGguYXRhbjIoeTEsIHgxKSArIFBJO1xuICAgICAgY29uc3QgdjEgPSB0aGV0YTEgLyBQSTtcbiAgICAgIGNvbnN0IHUxID0gMSAtIHBoaTEgLyBQSTI7XG4gICAgICBjb25zdCB4MiA9IHZlcnRpY2VzW2luMiArIDBdO1xuICAgICAgY29uc3QgeTIgPSB2ZXJ0aWNlc1tpbjIgKyAxXTtcbiAgICAgIGNvbnN0IHoyID0gdmVydGljZXNbaW4yICsgMl07XG4gICAgICBjb25zdCB0aGV0YTIgPSBNYXRoLmFjb3MoejIgLyBNYXRoLnNxcnQoeDIgKiB4MiArIHkyICogeTIgKyB6MiAqIHoyKSk7XG4gICAgICBjb25zdCBwaGkyID0gTWF0aC5hdGFuMih5MiwgeDIpICsgUEk7XG4gICAgICBjb25zdCB2MiA9IHRoZXRhMiAvIFBJO1xuICAgICAgY29uc3QgdTIgPSAxIC0gcGhpMiAvIFBJMjtcbiAgICAgIGNvbnN0IHgzID0gdmVydGljZXNbaW4zICsgMF07XG4gICAgICBjb25zdCB5MyA9IHZlcnRpY2VzW2luMyArIDFdO1xuICAgICAgY29uc3QgejMgPSB2ZXJ0aWNlc1tpbjMgKyAyXTtcbiAgICAgIGNvbnN0IHRoZXRhMyA9IE1hdGguYWNvcyh6MyAvIE1hdGguc3FydCh4MyAqIHgzICsgeTMgKiB5MyArIHozICogejMpKTtcbiAgICAgIGNvbnN0IHBoaTMgPSBNYXRoLmF0YW4yKHkzLCB4MykgKyBQSTtcbiAgICAgIGNvbnN0IHYzID0gdGhldGEzIC8gUEk7XG4gICAgICBjb25zdCB1MyA9IDEgLSBwaGkzIC8gUEkyO1xuICAgICAgY29uc3QgdmVjMSA9IFtcbiAgICAgICAgeDMgLSB4MixcbiAgICAgICAgeTMgLSB5MixcbiAgICAgICAgejMgLSB6MlxuICAgICAgXTtcbiAgICAgIGNvbnN0IHZlYzIgPSBbXG4gICAgICAgIHgxIC0geDIsXG4gICAgICAgIHkxIC0geTIsXG4gICAgICAgIHoxIC0gejJcbiAgICAgIF07XG4gICAgICBjb25zdCBub3JtYWwgPSBWZWMzLmNyb3NzKHZlYzEsIHZlYzIpLiR1bml0KCk7XG4gICAgICBsZXQgbmV3SW5kZXg7XG5cbiAgICAgIGlmICgodTEgPT09IDAgfHwgdTIgPT09IDAgfHwgdTMgPT09IDApICYmXG4gICAgICAgICAgKHUxID09PSAwIHx8IHUxID4gMC41KSAmJlxuICAgICAgICAgICAgKHUyID09PSAwIHx8IHUyID4gMC41KSAmJlxuICAgICAgICAgICAgICAodTMgPT09IDAgfHwgdTMgPiAwLjUpKSB7XG5cbiAgICAgICAgdmVydGljZXMucHVzaChcbiAgICAgICAgICB2ZXJ0aWNlc1tpbjEgKyAwXSxcbiAgICAgICAgICB2ZXJ0aWNlc1tpbjEgKyAxXSxcbiAgICAgICAgICB2ZXJ0aWNlc1tpbjEgKyAyXVxuICAgICAgICApO1xuICAgICAgICBuZXdJbmRleCA9IHZlcnRpY2VzLmxlbmd0aCAvIDMgLSAxO1xuICAgICAgICBpbmRpY2VzLnB1c2gobmV3SW5kZXgpO1xuICAgICAgICB0ZXhDb29yZHNbbmV3SW5kZXggKiAyICsgMF0gPSAxO1xuICAgICAgICB0ZXhDb29yZHNbbmV3SW5kZXggKiAyICsgMV0gPSB2MTtcbiAgICAgICAgbm9ybWFsc1tuZXdJbmRleCAqIDMgKyAwXSA9IG5vcm1hbC54O1xuICAgICAgICBub3JtYWxzW25ld0luZGV4ICogMyArIDFdID0gbm9ybWFsLnk7XG4gICAgICAgIG5vcm1hbHNbbmV3SW5kZXggKiAzICsgMl0gPSBub3JtYWwuejtcblxuICAgICAgICB2ZXJ0aWNlcy5wdXNoKFxuICAgICAgICAgIHZlcnRpY2VzW2luMiArIDBdLFxuICAgICAgICAgIHZlcnRpY2VzW2luMiArIDFdLFxuICAgICAgICAgIHZlcnRpY2VzW2luMiArIDJdXG4gICAgICAgICk7XG4gICAgICAgIG5ld0luZGV4ID0gdmVydGljZXMubGVuZ3RoIC8gMyAtIDE7XG4gICAgICAgIGluZGljZXMucHVzaChuZXdJbmRleCk7XG4gICAgICAgIHRleENvb3Jkc1tuZXdJbmRleCAqIDIgKyAwXSA9IDE7XG4gICAgICAgIHRleENvb3Jkc1tuZXdJbmRleCAqIDIgKyAxXSA9IHYyO1xuICAgICAgICBub3JtYWxzW25ld0luZGV4ICogMyArIDBdID0gbm9ybWFsLng7XG4gICAgICAgIG5vcm1hbHNbbmV3SW5kZXggKiAzICsgMV0gPSBub3JtYWwueTtcbiAgICAgICAgbm9ybWFsc1tuZXdJbmRleCAqIDMgKyAyXSA9IG5vcm1hbC56O1xuXG4gICAgICAgIHZlcnRpY2VzLnB1c2goXG4gICAgICAgICAgdmVydGljZXNbaW4zICsgMF0sXG4gICAgICAgICAgdmVydGljZXNbaW4zICsgMV0sXG4gICAgICAgICAgdmVydGljZXNbaW4zICsgMl1cbiAgICAgICAgKTtcbiAgICAgICAgbmV3SW5kZXggPSB2ZXJ0aWNlcy5sZW5ndGggLyAzIC0gMTtcbiAgICAgICAgaW5kaWNlcy5wdXNoKG5ld0luZGV4KTtcbiAgICAgICAgdGV4Q29vcmRzW25ld0luZGV4ICogMiArIDBdID0gMTtcbiAgICAgICAgdGV4Q29vcmRzW25ld0luZGV4ICogMiArIDFdID0gdjM7XG4gICAgICAgIG5vcm1hbHNbbmV3SW5kZXggKiAzICsgMF0gPSBub3JtYWwueDtcbiAgICAgICAgbm9ybWFsc1tuZXdJbmRleCAqIDMgKyAxXSA9IG5vcm1hbC55O1xuICAgICAgICBub3JtYWxzW25ld0luZGV4ICogMyArIDJdID0gbm9ybWFsLno7XG4gICAgICB9XG5cbiAgICAgIG5vcm1hbHNbaW4xICsgMF0gPSBub3JtYWxzW2luMiArIDBdID0gbm9ybWFsc1tpbjMgKyAwXSA9IG5vcm1hbC54O1xuICAgICAgbm9ybWFsc1tpbjEgKyAxXSA9IG5vcm1hbHNbaW4yICsgMV0gPSBub3JtYWxzW2luMyArIDFdID0gbm9ybWFsLnk7XG4gICAgICBub3JtYWxzW2luMSArIDJdID0gbm9ybWFsc1tpbjIgKyAyXSA9IG5vcm1hbHNbaW4zICsgMl0gPSBub3JtYWwuejtcblxuICAgICAgdGV4Q29vcmRzW2l1MSArIDBdID0gdTE7XG4gICAgICB0ZXhDb29yZHNbaXUxICsgMV0gPSB2MTtcblxuICAgICAgdGV4Q29vcmRzW2l1MiArIDBdID0gdTI7XG4gICAgICB0ZXhDb29yZHNbaXUyICsgMV0gPSB2MjtcblxuICAgICAgdGV4Q29vcmRzW2l1MyArIDBdID0gdTM7XG4gICAgICB0ZXhDb29yZHNbaXUzICsgMV0gPSB2MztcbiAgICB9XG5cbiAgICBzdXBlcih7XG4gICAgICAuLi5vcHRzLFxuICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICB2ZXJ0aWNlczogbWFrZVR5cGVkQXJyYXkoRmxvYXQzMkFycmF5LCB2ZXJ0aWNlcyksXG4gICAgICAgIG5vcm1hbHM6IG1ha2VUeXBlZEFycmF5KEZsb2F0MzJBcnJheSwgbm9ybWFscyksXG4gICAgICAgIHRleENvb3JkczogbWFrZVR5cGVkQXJyYXkoRmxvYXQzMkFycmF5LCB0ZXhDb29yZHMpLFxuICAgICAgICBpbmRpY2VzOiBtYWtlVHlwZWRBcnJheShVaW50MTZBcnJheSwgaW5kaWNlcylcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJY29TcGhlcmUgZXh0ZW5kcyBNb2RlbCB7XG4gIGNvbnN0cnVjdG9yKG9wdHMgPSB7fSkge1xuICAgIHN1cGVyKHtnZW9tZXRyeTogbmV3IEljb1NwaGVyZUdlb21ldHJ5KG9wdHMpLCAuLi5vcHRzfSk7XG4gIH1cbn1cbiJdfQ==